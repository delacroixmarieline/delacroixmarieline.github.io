{% assign item = include.item %}
{% if item == "" or item == nil %}{% assign item = page %}{% endif %}

{% assign itemCategory = item.url | split: "/" %}

{% assign pathElements = item.path | split:"/" %}

{% assign imgPath = "" | split:"/" %}
{% assign imgPath = imgPath | push: "img/catalogue" | push: pathElements[1] %}

<div class="row">
  <div class="col-sm-6">

    <h2>Catalogue : <a href="{{ site.baseurl }}/{{ item.type }}">{{ itemCategory[1] | capitalize }}</a></h2>

    <h3>{{ item.title }}</h3>
    <ul class="list-unstyled">
      {% if item.matieres != nil %}<li><strong>Matières</strong>&nbsp;:&nbsp;{{ item.matieres | join:", " }}</li>{% endif %}
      {% if item.taille != nil %}<li><strong>Taille</strong>&nbsp;:&nbsp;{% if item.taille contains "unique" %}unique{% else %}{{ item.taille | append: " cm"}}{% endif %}</li>{% endif %}
      {% if item.prix != nil %}<li><strong>Prix</strong>&nbsp;:&nbsp;{{ item.prix | append: " €"}}</li>{% endif %}
    </ul>

    {{ item.content }}

  </div>
  <div class="col-sm-6">
    <div class="carousel slide" id="item-carousel" data-ride="" data-interval="3000" data-pause="hover">
       <div class="carousel-inner" role="listbox">
        {% for i in item.images %}
        <div class="item{% if forloop.first == true %} active{% endif %}">
          {% capture imagePath %}{{ site.baseurl }}/{{ imgPath | join:'/'}}/{{ i }}.jpg{% endcapture %}
          {% assign imagePath = imagePath | remove_first: "/" %}
          {% responsive_image_block %}
              path: {{ imagePath }}
              alt: {{ item.title }}
              title: {{ item.title }}
              sizes: {{ site.figure.carousel.sizes }}
          {% endresponsive_image_block %}
        </div>
        {% endfor %}
      </div>

      <a href="#item-carousel" class="left carousel-control" role="button" data-slide="prev"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> <span class="sr-only">Previous</span> </a>
      <a href="#item-carousel" class="right carousel-control" role="button" data-slide="next"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> <span class="sr-only">Next</span> </a>

<ol class="carousel-indicators">
{% for i in item.images %}
<li data-target="#item-carousel" data-slide-to="{{ forloop.index0 }}"{% if forloop.first == true %} class="active"{% endif %}>
{% capture imagePath %}{{ site.baseurl }}/{{ imgPath | join:'/'}}/{{ i }}.jpg{% endcapture %}
{% assign imagePath = imagePath | remove_first: "/" %}

{% responsive_image_block %}
path: {{ imagePath }}
alt: {{ item.title }}
title: {{ item.title }}
sizes: {{ site.figure.carousel-thumbs.sizes }}
{% endresponsive_image_block %}

</li>{% endfor %}
</ol>

    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-6 col-sm-offset-6">
    <div class="row nextPrevItem">
      <div class="col-sm-6">
        {% comment %}Find prev next item with same property{% endcomment %}
        {% include prevOrNextItemSearch.html propName="type" searchFor="previous" %}
        {% include prevOrNextItemSearch.html propName="type" searchFor="next" %}

        {% if previousItem != nil %}
          {% assign previousItemImage = previousItem.images | first %}
          <a class="btn btn-primary btn-sm btn-block btnPrev" href="{{ site.baseurl }}{{ previousItem.url }}#item-carousel"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>

{% capture imagePath %}{{ site.baseurl }}/{{ imgPath | join:'/'}}/{{ previousItemImage }}.jpg{% endcapture %}
{% assign imagePath = imagePath | remove_first: "/" %}

{% responsive_image_block %}
path: {{ imagePath }}
alt: {{ previousItem.title }}
title: {{ previousItem.title }}
sizes: {{ site.figure.carousel-thumbs.sizes }}
{% endresponsive_image_block %}

 Article précédent</a>
        {% endif %}
      </div>
      <div class="col-sm-6">
        {% if nextItem != nil %}
          {% assign nextItemImage = nextItem.images | first %}
          <a class="btn btn-primary btn-sm btn-block btnNext" href="{{ site.baseurl }}{{ nextItem.url }}#item-carousel">Article suivant

{% capture imagePath %}{{ site.baseurl }}/{{ imgPath | join:'/'}}/{{ nextItemImage }}.jpg{% endcapture %}
{% assign imagePath = imagePath | remove_first: "/" %}

{% responsive_image_block %}
path: {{ imagePath }}
alt: {{ nextItem.title }}
title: {{ nextItem.title }}
sizes: {{ site.figure.carousel-thumbs.sizes }}
{% endresponsive_image_block %}

         <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
